{"version":3,"sources":["Grid/GridElement.js","Grid/Chart.js","Grid/grid.js","Grid/DraggableSource.js","Grid/layoutReducer.js","Grid/items.js","App.js","index.js"],"names":["GridElement","temp","children","mouseEvent","rest","forwardProps","pick","ref","useRef","useEffect","refCur","current","element","event","document","createEvent","initEvent","original","getBoundingClientRect","left","clientX","top","clientY","dispatchEvent","createDragStartEvent","baseOptions","title","text","series","data","i","push","Math","random","generateData","Chart","type","height","options","React","useMemo","chart","highcharts","Highcharts","Grid","props","className","showAddCursor","undefined","style","cursor","layout","onLayoutChange","dispatch","cols","rowHeight","width","transformScale","zoom","map","item","key","border","content","parseFloat","display","onClick","setShowAddCursor","newLayout","concat","length","toString","x","y","w","h","elementIsInChain","elementToTraverse","elementToFind","parentElement","DraggableSource","targetRef","onDrag","onStop","useState","inserted","setInserted","visibility","e","target","console","log","placeHolder","querySelector","transform","position","layoutReducer","state","action","findIndex","maxX","reduce","val","maxY","String","fromCharCode","filter","floor","merged","merge","keyBy","Object","values","initialItems","SourceDummyBlock","styled","div","Modal","setAppElement","breakpoints","landscape","1700","margins","portrait","1300","App","setZoom","isModalOpen","setIsModalOpen","zoomContainerHeight","setZoomContainerHeight","window","innerWidth","windowwidth","setwindowwidth","orientation","setorientation","isFitToWindow","setIsFitToWindow","useReducer","zoomHandler","ctrlKey","preventDefault","max","deltaY","toFixed","addEventListener","passive","removeEventListener","onclick","contains","classList","zoomFitToWindow","useCallback","baseWidth","keys","find","widthRatio","resizeHandler","value","onChange","alignItems","marginLeft","borderRadius","margin","transformOrigin","touchAction","isOpen","onRequestClose","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.9ecd8307.chunk.js","sourcesContent":["import React, { useRef, useEffect } from 'react';\nimport { pick } from 'lodash';\n\nconst createDragStartEvent = (element, mouseEvent) => {\n  const event = document.createEvent('HTMLEvents');\n  event.initEvent('mousedown', true, true);\n\n  // fake getBoundingClientRect for one call\n  // this way, we can influence where the drag action is started\n  const original = element.getBoundingClientRect;\n  element.getBoundingClientRect = () => {\n    element.getBoundingClientRect = original;\n    return {\n      left: mouseEvent.clientX,\n      top: mouseEvent.clientY,\n    };\n  };\n  element.dispatchEvent(event);\n};\n\nconst createDragStopEvent = (element) => {\n  const event = document.createEvent('HTMLEvents');\n  event.initEvent('mouseup', true, true);\n};\n\nconst GridElement = ({ temp, children, mouseEvent, ...rest }) => {\n  const forwardProps = pick(rest, [\n    'style',\n    'className',\n    'onMouseDown',\n    'onMouseUp',\n    'onTouchEnd',\n    'onTouchStart',\n  ]);\n\n  const ref = useRef();\n\n  //fake the drag start event if its a new element with property temp\n  useEffect(() => {\n    const refCur = ref && ref.current;\n    if (refCur && temp) {\n      createDragStartEvent(refCur, mouseEvent);\n    }\n    return () => refCur && temp && createDragStopEvent(refCur);\n  }, [ref, temp, mouseEvent]);\n\n  return (\n    <div ref={ref} {...forwardProps}>\n      {children}\n    </div>\n  );\n};\n\nexport default GridElement;\n","import React from 'react';\nimport Highcharts from 'highcharts';\nimport HighchartsReact from 'highcharts-react-official';\n\nconst generateData = () => {\n  const data = [];\n  for (let i = 0; i < 100; i++) {\n    data.push(Math.random() * 10);\n  }\n\n  return data;\n};\n\nconst baseOptions = {\n  title: {\n    text: 'My chart',\n  },\n  series: [\n    {\n      data: generateData(),\n    },\n  ],\n};\n\nconst Chart = ({ type = 'line', height = 470 }) => {\n  const options = React.useMemo(\n    () => ({\n      ...baseOptions,\n      series: [{ ...baseOptions.series[0], type }],\n      chart: { height },\n    }),\n    [type, height]\n  );\n  return (\n    <div>\n      <HighchartsReact highcharts={Highcharts} options={options} height={190} />\n    </div>\n  );\n};\n\nexport default Chart;\n","import React, { useRef } from 'react';\nimport GridLayout from 'react-grid-layout';\nimport 'react-grid-layout/css/styles.css';\nimport 'react-resizable/css/styles.css';\nimport GridElement from './GridElement';\nimport Chart from './Chart';\n\nconst Grid = (props) => {\n  const ref = useRef();\n\n  return (\n    <div\n      className={props.showAddCursor ? 'adding' : undefined}\n      style={{ cursor: props.showAddCursor ? 'crosshair' : undefined }}\n    >\n      <div ref={ref}>\n        <GridLayout\n          className=\"layout\"\n          layout={props.layout}\n          onLayoutChange={(layout) =>\n            props.dispatch({ type: 'newLayout', layout })\n          }\n          cols={6}\n          rowHeight={30}\n          width={props.width}\n          transformScale={props.zoom}\n        >\n          {props.layout.map((item) => (\n            <GridElement\n              key={'' + item.i}\n              style={{ border: '1px solid red' }}\n              {...item}\n            >\n              {item.content}\n              {parseFloat(item.i) === 1 && (\n                <button\n                  style={{\n                    border: '1px solid blue',\n                    display: 'block',\n                    cursor: 'pointer',\n                  }}\n                  onClick={props.onClick}\n                >\n                  open modal\n                </button>\n              )}\n              {item.content === 'EE' && <Chart />}\n              {item.content === 'AA' && <Chart type=\"column\" height={170} />}\n              {item.content === 'DD' && <Chart type=\"spline\" height={300} />}\n              <div\n                className=\"indicator\"\n                onClick={() => {\n                  if (props.showAddCursor) {\n                    props.setShowAddCursor(false);\n\n                    const newLayout = props.layout.concat();\n                    newLayout.push({\n                      i: newLayout.length.toString(),\n                      x: item.x,\n                      y: item.y + 1,\n                      w: 1,\n                      h: 1,\n                      content: 'N',\n                    });\n\n                    props.dispatch({ type: 'newLayout', layout: newLayout });\n                  }\n                }}\n              />\n            </GridElement>\n          ))}\n        </GridLayout>\n      </div>\n    </div>\n  );\n};\n\nexport default Grid;\n","import React, { useState } from 'react';\nimport Draggable from 'react-draggable';\n\nconst elementIsInChain = (elementToTraverse, elementToFind) => {\n  if (elementToTraverse === elementToFind) {\n    return elementToFind;\n  }\n  if (elementToTraverse.parentElement) {\n    return elementIsInChain(elementToTraverse.parentElement, elementToFind);\n  }\n  return false;\n};\n\nconst DraggableSource = ({\n  targetRef,\n  dispatch,\n  onDrag,\n  onStop,\n  children,\n  ...rest\n}) => {\n  // item is not visibile if it is inserted.. as the acutual grid item should be displayed then\n  const [inserted, setInserted] = useState(false);\n  const onDragOverwrite = (e, data) => {\n    // console.log('onDrag');\n    if (onDrag) onDrag(e, data);\n    const target = elementIsInChain(e.target, targetRef.current);\n    if (!target && inserted) {\n      console.log('!target && inserted; dispatching clearTemp');\n      dispatch({ type: 'clearTemp' });\n      setInserted(false);\n      const placeHolder = document.querySelector('.react-grid-placeholder');\n      if (placeHolder) placeHolder.style.transform = 'translate(-8000px, 0px)';\n      return;\n    }\n    if (target && !inserted) {\n      console.log('target && !inserted; dispatching addTemp', data);\n      dispatch({\n        type: 'addTemp',\n        mouseEvent: { clientX: e.clientX, clientY: e.clientY },\n      });\n      setInserted(true);\n      return;\n    }\n  };\n  const onStopOverwrite = (e, data) => {\n    console.log('onStop');\n    if (onStop) onStop(e, data);\n    if (inserted) {\n      console.log('inserted; dispatching finalizeTempItem', data);\n      dispatch({ type: 'finaliseTemporaryItem' });\n      setInserted(false);\n    } else {\n      console.log('!inserted; dispatching clearTemp');\n      dispatch({ type: 'clearTemp' });\n    }\n  };\n\n  return (\n    <div style={{ visibility: inserted ? 'hidden' : 'visible' }}>\n      <Draggable\n        onDrag={onDragOverwrite}\n        onStop={onStopOverwrite}\n        {...rest}\n        position={{ x: 0, y: 0 }}\n      >\n        {children}\n      </Draggable>\n    </div>\n  );\n};\n\nexport default DraggableSource;\n","import { merge, keyBy } from 'lodash';\n\nconst layoutReducer = (state, action) => {\n  switch (action.type) {\n    //add a temporary item (if none already exists)\n    //this is used when hovering with a DraggableSource over the grid\n    //the action is expected to have an mouseEvent attribute with clientX and clientY attributes\n    //this is used to tell react-grid-layout where the newly created item in the grid should be moved\n    //after the mocked mousedown event.\n    case 'addTemp':\n      if (state.findIndex((item) => item.temp) !== -1) {\n        return state;\n      }\n      const maxX = state.reduce(\n        (val, item) => (item.x + item.h > val ? item.x + item.h : val),\n        0\n      );\n      const maxY = state.reduce(\n        (val, item) => (item.y + item.w > val ? item.y + item.w : val),\n        0\n      );\n      console.log('addTemp dispatcher', { maxY, maxX });\n      return [\n        ...state,\n        {\n          x: maxX + 1,\n          y: maxY + 1,\n          h: action.h ? action.h : 1,\n          w: action.w ? action.w : 1,\n          content: action.content\n            ? action.content\n            : String.fromCharCode(65 + (state.length % 25)),\n          temp: true,\n          mouseEvent: action.mouseEvent,\n          i: '' + state.length,\n        },\n      ];\n    //removes temporary elements\n    //this is used when dragging a DraggableSource outside the grid\n    case 'clearTemp':\n      return state.filter((item) => !item.temp);\n    //finalise the temporary item\n    //this is used when dragging a draggablesource over the grid and letting go (mouseup)\n    case 'finaliseTemporaryItem': {\n      const maxX = state.reduce(\n        (val, item) => (item.x + item.h > val ? item.x + item.h : val),\n        0\n      );\n      const maxY = state.reduce(\n        (val, item) => (item.y + item.w > val ? item.y + item.w : val),\n        0\n      );\n      return state.map((item) => {\n        console.log('y comp', item.y % 70);\n        if (item.y + 1 === maxY) {\n          console.log('item', item);\n        }\n        return {\n          ...item,\n          temp: false,\n          y: item.y + 1 === maxY ? Math.floor(item.y % 70) : item.y,\n          x: item.x + 1 === maxX ? 2 : item.x,\n        };\n      });\n    }\n    //when the whole layout shall be replaced\n    //used on onLayoutChange from grid layou\n    case 'newLayout':\n      console.log('dispatching new layout', action.layout);\n      if (state.findIndex((item) => item.temp) !== -1) {\n        return state;\n      }\n      //react-grid-layout only returns the required keys for layouting\n      //we have to merge the previous state, if we want to save other data in the array\n      var merged = merge(keyBy(state, 'i'), keyBy(action.layout, 'i'));\n      return Object.values(merged);\n    default:\n      return state;\n  }\n};\n\nexport default layoutReducer;\n","const initialItems = [\n  { i: '0', x: 0, y: 0, w: 1, h: 2, content: 'A' },\n  { i: '1', x: 1, y: 0, w: 3, h: 2, content: 'B' },\n  { i: '2', x: 4, y: 0, w: 1, h: 2, content: 'C' },\n  { i: '3', x: 5, y: 0, w: 1, h: 2, content: 'D' },\n  { i: '4', x: 0, y: 2, w: 2, h: 2, content: 'E' },\n  { i: '5', x: 2, y: 2, w: 3, h: 2, content: 'F' },\n  { i: '6', x: 5, y: 2, w: 1, h: 2, content: 'G' },\n  { i: '7', x: 0, y: 4, w: 6, h: 2, content: 'H' },\n  { i: '8', x: 0, y: 6, w: 1, h: 2, content: 'I' },\n  { i: '9', x: 2, y: 6, w: 1, h: 2, content: 'J' },\n  { i: '10', x: 4, y: 6, w: 1, h: 2, content: 'K' },\n  { i: '11', x: 5, y: 6, w: 1, h: 2, content: 'L' },\n  { i: '12', x: 0, y: 8, w: 3, h: 1, content: 'M' },\n  { i: '13', x: 3, y: 8, w: 3, h: 1, content: 'N' },\n  { i: '14', x: 1, y: 9, w: 2, h: 2, content: 'O' },\n  { i: '15', x: 3, y: 9, w: 3, h: 2, content: 'P' },\n  { i: '16', x: 0, y: 11, w: 3, h: 3, content: 'Q' },\n  { i: '17', x: 3, y: 11, w: 3, h: 3, content: 'R' },\n  { i: '18', x: 0, y: 14, w: 2, h: 3, content: 'S' },\n  { i: '19', x: 2, y: 14, w: 2, h: 3, content: 'T' },\n  { i: '20', x: 4, y: 14, w: 2, h: 3, content: 'U' },\n  { i: '21', x: 0, y: 17, w: 3, h: 3, content: 'V' },\n  { i: '22', x: 3, y: 17, w: 3, h: 3, content: 'W' },\n  { i: '23', x: 0, y: 20, w: 4, h: 2, content: 'X' },\n  { i: '24', x: 4, y: 20, w: 2, h: 2, content: 'Y' },\n  { i: '25', x: 0, y: 22, w: 2, h: 2, content: 'Z' },\n  { i: '26', x: 2, y: 22, w: 4, h: 5, content: 'AA' },\n  { i: '27', x: 0, y: 24, w: 2, h: 3, content: 'BB' },\n  { i: '28', x: 0, y: 27, w: 5, h: 5, content: 'CC' },\n  { i: '29', x: 5, y: 27, w: 1, h: 10, content: 'DD' },\n  { i: '30', x: 0, y: 32, w: 5, h: 14, content: 'EE' },\n];\n\nexport default initialItems;\n","import './App.css';\nimport React from 'react';\nimport {\n  useState,\n  useEffect,\n  useRef,\n  useCallback,\n  useMemo,\n  useReducer,\n} from 'react';\nimport Modal from 'react-modal';\nimport GridLayout from './Grid/grid';\nimport styled from 'styled-components/macro';\nimport DraggableSource from './Grid/DraggableSource';\nimport layoutReducer from './Grid/layoutReducer';\nimport initialItems from './Grid/items';\nimport 'react-resizable/css/styles.css';\n\nconst SourceDummyBlock = styled.div`\n  width: 100px;\n  height: 100px;\n  border: 1px solid blue;\n  display: grid;\n  place-items: center;\n  margin: 0 20px;\n  border-radius: 10px;\n`;\n\nModal.setAppElement('#modal');\n\nconst breakpoints = {\n  landscape: { 1700: { margins: 80 } },\n  portrait: { 1300: { margins: 80 } },\n};\n\nexport default function App() {\n  const [zoom, setZoom] = useState(1);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [zoomContainerHeight, setZoomContainerHeight] = useState(0);\n  const [windowwidth, setwindowwidth] = useState(window.innerWidth);\n  const [orientation, setorientation] = useState('landscape');\n  const [isFitToWindow, setIsFitToWindow] = useState(true);\n  const [showAddCursor, setShowAddCursor] = useState(false);\n\n  const [layout, dispatch] = useReducer(layoutReducer, initialItems);\n\n  const ref = useRef(null);\n\n  const width = useMemo(() => (orientation === 'landscape' ? 1620 : 1220), [\n    orientation,\n  ]);\n\n  const zoomHandler = (e) => {\n    // override browser zoom & delegate deltaY to zoom level\n    if (e.ctrlKey) {\n      e.preventDefault();\n\n      setIsFitToWindow(false);\n\n      setZoom((x) =>\n        Math.max(x - parseFloat((e.deltaY * 0.01).toFixed(2)), 0.25)\n      );\n    }\n  };\n\n  useEffect(() => {\n    window.addEventListener('wheel', zoomHandler, {\n      // Chrome sets wheel listeners on window, document, & body as passive by default\n      // which throws an error in the console if you call `e.preventDefault()`\n      passive: false,\n    });\n    return () =>\n      window.removeEventListener('wheel', zoomHandler, {\n        passive: false,\n      });\n  }, []);\n\n  const documentClickHandler = (event) => {\n    if (ref.current.contains(event.target)) {\n      if (!event.target.classList.contains('indicator')) {\n        setShowAddCursor(false);\n      }\n    } else {\n      setShowAddCursor(false);\n    }\n  };\n\n  document.onclick = documentClickHandler;\n\n  const zoomFitToWindow = useCallback(\n    (baseWidth) => {\n      setwindowwidth(baseWidth);\n\n      const map = breakpoints[orientation];\n      const key = Object.keys(map).find((x) => x >= baseWidth);\n      let widthRatio = 1;\n\n      if (map[key]?.margins) {\n        widthRatio = (baseWidth - map[key].margins) / width;\n      }\n\n      setZoom(widthRatio);\n    },\n    [orientation, width]\n  );\n\n  const resizeHandler = useCallback(\n    (e) => {\n      if (!isFitToWindow) return;\n\n      zoomFitToWindow(e.target.innerWidth);\n    },\n    [zoomFitToWindow, isFitToWindow]\n  );\n\n  useEffect(() => {\n    window.addEventListener('resize', resizeHandler);\n    return () => window.removeEventListener('resize', resizeHandler);\n  }, [resizeHandler]);\n\n  useEffect(() => {\n    if (ref.current) {\n      setZoomContainerHeight(ref.current.getBoundingClientRect().height);\n    }\n  }, []);\n\n  useEffect(() => {\n    // auto fit zoom on page load\n    zoomFitToWindow(window.innerWidth);\n  }, [zoomFitToWindow]);\n\n  const zoomIn = () => {\n    setIsFitToWindow(false);\n    setZoom((x) => parseFloat((x + 0.25).toFixed(2)));\n  };\n  const zoomOut = () => {\n    setIsFitToWindow(false);\n    setZoom((x) => Math.max(parseFloat((x - 0.25).toFixed(2)), 0.25));\n  };\n\n  const handleChange = (e) => {\n    let val = e.target.value;\n    val /= 100;\n    setZoom(Math.max(parseFloat(val.toFixed(2)), 0));\n  };\n  console.log('layout', layout);\n  return (\n    <div className=\"App\">\n      {/* Ensure header scales full width while zoomed; Probably a cleaner way to do this */}\n      <div\n        className=\"header\"\n        style={{ width: zoom < 1 ? windowwidth : windowwidth * zoom }}\n      >\n        <div>Zoom</div>\n        <div className=\"btnContainer\">\n          <div className=\"zoomToggle\">\n            <button onClick={zoomOut}>-</button>\n            <input\n              value={parseFloat((zoom * 100).toFixed(2))}\n              onChange={handleChange}\n            />\n            <button onClick={zoomIn}>+</button>\n          </div>\n          <button\n            className={`${isFitToWindow ? 'btn active' : 'btn'}`}\n            onClick={() => {\n              setIsFitToWindow(true);\n              zoomFitToWindow(windowwidth);\n            }}\n          >\n            Fit to window\n          </button>\n          <button\n            className={`${orientation === 'portrait' ? 'btn active' : 'btn'}`}\n            onClick={() => setorientation('portrait')}\n          >\n            Set Portrait\n          </button>\n          <button\n            className={`${orientation === 'landscape' ? 'btn active' : 'btn'}`}\n            onClick={() => setorientation('landscape')}\n          >\n            Set Landscape\n          </button>\n        </div>\n      </div>\n      <div\n        style={{\n          position: 'relative',\n          top: 100,\n          display: 'flex',\n          alignItems: 'center',\n          marginLeft: 60,\n        }}\n      >\n        <DraggableSource targetRef={ref} dispatch={dispatch} key=\"1\">\n          <SourceDummyBlock>Drag me</SourceDummyBlock>\n        </DraggableSource>\n        <DraggableSource targetRef={ref} dispatch={dispatch} key=\"2\">\n          <SourceDummyBlock>Drag me</SourceDummyBlock>\n        </DraggableSource>\n        <button\n          style={{\n            width: 200,\n            height: 60,\n            border: '1px solid black',\n            borderRadius: 10,\n          }}\n          onClick={() => setShowAddCursor(true)}\n        >\n          Click me to add\n        </button>\n      </div>\n      <div\n        className=\"container\"\n        style={{\n          margin: '100px auto 0',\n          width: width * zoom,\n          // scale height to remove whitespace\n          height: zoomContainerHeight * zoom,\n        }}\n      >\n        <div\n          ref={ref}\n          style={{\n            transform: `scale(${zoom})`,\n            transformOrigin: '0 0 0',\n            width,\n            touchAction: 'pan-x pan-y',\n          }}\n        >\n          <GridLayout\n            zoom={zoom}\n            onClick={() => setIsModalOpen(true)}\n            width={orientation === 'landscape' ? 1620 : 1220}\n            layout={layout}\n            dispatch={dispatch}\n            showAddCursor={showAddCursor}\n            setShowAddCursor={setShowAddCursor}\n          />\n        </div>\n        <Modal\n          isOpen={isModalOpen}\n          onRequestClose={() => setIsModalOpen(false)}\n          style={{ content: { width: 500, margin: '100px auto' } }}\n        >\n          <h1>Best modal ever</h1>\n          <button\n            style={{\n              border: '1px solid blue',\n              display: 'block',\n              cursor: 'pointer',\n            }}\n            onClick={() => setIsModalOpen(false)}\n          >\n            Close me\n          </button>\n        </Modal>\n      </div>\n    </div>\n  );\n}\n\n// Panning: touch-action: pan-x pan-y https://developer.mozilla.org/en-US/docs/Web/CSS/touch-action\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n"],"sourceRoot":""}