(this.webpackJsonpzoom=this.webpackJsonpzoom||[]).push([[0],{24:function(e,t,n){},53:function(e,t,n){},82:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),o=n(3),i=n.n(o),r=(n(53),n(1)),l=n(44),s=(n(24),n(20)),u=n.n(s),d=n(41),m=n.n(d),h=(n(79),n(40),n(13)),p=n(6),f=function(e){var t=e.temp,n=e.children,o=e.mouseEvent,i=Object(h.a)(e,["temp","children","mouseEvent"]),r=Object(p.pick)(i,["style","className","onMouseDown","onMouseUp","onTouchEnd","onTouchStart"]),l=Object(c.useRef)();return Object(c.useEffect)((function(){var e=l&&l.current;return e&&t&&function(e,t){var n=document.createEvent("HTMLEvents");n.initEvent("mousedown",!0,!0);var c=e.getBoundingClientRect;e.getBoundingClientRect=function(){return e.getBoundingClientRect=c,{left:t.clientX,top:t.clientY}},e.dispatchEvent(n)}(e,o),function(){return e&&t&&void document.createEvent("HTMLEvents").initEvent("mouseup",!0,!0)}}),[l,t,o]),a.a.createElement("div",Object.assign({ref:l},r),n)},y=n(4),g=n(19),b=n.n(g),w=n(42),v=n.n(w),E={title:{text:"My chart"},series:[{data:function(){for(var e=[],t=0;t<100;t++)e.push(10*Math.random());return e}()}]},x=function(e){var t=e.type,n=void 0===t?"line":t,c=e.height,o=void 0===c?470:c,i=a.a.useMemo((function(){return Object(y.a)(Object(y.a)({},E),{},{series:[Object(y.a)(Object(y.a)({},E.series[0]),{},{type:n})],chart:{height:o}})}),[n,o]);return a.a.createElement("div",null,a.a.createElement(v.a,{highcharts:b.a,options:i,height:190}))},O=function(e){var t=Object(c.useRef)();return a.a.createElement("div",{className:e.showAddCursor?"adding":void 0,style:{cursor:e.showAddCursor?"crosshair":void 0}},a.a.createElement("div",{ref:t},a.a.createElement(m.a,{className:"layout",layout:e.layout,onLayoutChange:function(t){return e.dispatch({type:"newLayout",layout:t})},cols:6,rowHeight:30,width:e.width,transformScale:e.zoom},e.layout.map((function(t){return a.a.createElement(f,Object.assign({key:""+t.i,style:{border:"1px solid red"}},t),t.content,1===parseFloat(t.i)&&a.a.createElement("button",{style:{border:"1px solid blue",display:"block",cursor:"pointer"},onClick:e.onClick},"open modal"),"EE"===t.content&&a.a.createElement(x,null),"AA"===t.content&&a.a.createElement(x,{type:"column",height:170}),"DD"===t.content&&a.a.createElement(x,{type:"spline",height:300}),a.a.createElement("div",{className:"indicator",onClick:function(){if(e.showAddCursor){e.setShowAddCursor(!1);var n=e.layout.concat();n.push({i:n.length.toString(),x:t.x,y:t.y+1,w:1,h:1,content:"N"}),e.dispatch({type:"newLayout",layout:n})}}}))})))))},j=n(43),k=n.n(j),C=function e(t,n){return t===n?n:!!t.parentElement&&e(t.parentElement,n)},S=function(e){var t=e.targetRef,n=e.dispatch,o=e.onDrag,i=e.onStop,l=e.children,s=Object(h.a)(e,["targetRef","dispatch","onDrag","onStop","children"]),u=Object(c.useState)(!1),d=Object(r.a)(u,2),m=d[0],p=d[1];return a.a.createElement("div",{style:{visibility:m?"hidden":"visible"}},a.a.createElement(k.a,Object.assign({onDrag:function(e,c){o&&o(e,c);var a=C(e.target,t.current);if(a||!m){if(a&&!m)return console.log("target && !inserted; dispatching addTemp",c),n({type:"addTemp",mouseEvent:{clientX:e.clientX,clientY:e.clientY}}),void p(!0)}else{console.log("!target && inserted; dispatching clearTemp"),n({type:"clearTemp"}),p(!1);var i=document.querySelector(".react-grid-placeholder");i&&(i.style.transform="translate(-8000px, 0px)")}},onStop:function(e,t){console.log("onStop"),i&&i(e,t),m?(console.log("inserted; dispatching finalizeTempItem",t),n({type:"finaliseTemporaryItem"}),p(!1)):(console.log("!inserted; dispatching clearTemp"),n({type:"clearTemp"}))}},s,{position:{x:0,y:0}}),l))},N=n(48),T=function(e,t){switch(t.type){case"addTemp":if(-1!==e.findIndex((function(e){return e.temp})))return e;var n=e.reduce((function(e,t){return t.x+t.h>e?t.x+t.h:e}),0),c=e.reduce((function(e,t){return t.y+t.w>e?t.y+t.w:e}),0);return console.log("addTemp dispatcher",{maxY:c,maxX:n}),[].concat(Object(N.a)(e),[{x:n+1,y:c+1,h:t.h?t.h:1,w:t.w?t.w:1,content:t.content?t.content:String.fromCharCode(65+e.length%25),temp:!0,mouseEvent:t.mouseEvent,i:""+e.length}]);case"clearTemp":return e.filter((function(e){return!e.temp}));case"finaliseTemporaryItem":var a=e.reduce((function(e,t){return t.x+t.h>e?t.x+t.h:e}),0),o=e.reduce((function(e,t){return t.y+t.w>e?t.y+t.w:e}),0);return e.map((function(e){return console.log("y comp",e.y%70),e.y+1===o&&console.log("item",e),Object(y.a)(Object(y.a)({},e),{},{temp:!1,y:e.y+1===o?Math.floor(e.y%70):e.y,x:e.x+1===a?2:e.x})}));case"newLayout":if(-1!==e.findIndex((function(e){return e.temp})))return e;var i=Object(p.merge)(Object(p.keyBy)(e,"i"),Object(p.keyBy)(t.layout,"i"));return Object.values(i);default:return e}},R=[{i:"0",x:0,y:0,w:1,h:2,content:"A"},{i:"1",x:1,y:0,w:3,h:2,content:"B"},{i:"2",x:4,y:0,w:1,h:2,content:"C"},{i:"3",x:5,y:0,w:1,h:2,content:"D"},{i:"4",x:0,y:2,w:2,h:2,content:"E"},{i:"5",x:2,y:2,w:3,h:2,content:"F"},{i:"6",x:5,y:2,w:1,h:2,content:"G"},{i:"7",x:0,y:4,w:6,h:2,content:"H"},{i:"8",x:0,y:6,w:1,h:2,content:"I"},{i:"9",x:2,y:6,w:1,h:2,content:"J"},{i:"10",x:4,y:6,w:1,h:2,content:"K"},{i:"11",x:5,y:6,w:1,h:2,content:"L"},{i:"12",x:0,y:8,w:3,h:1,content:"M"},{i:"13",x:3,y:8,w:3,h:1,content:"N"},{i:"14",x:1,y:9,w:2,h:2,content:"O"},{i:"15",x:3,y:9,w:3,h:2,content:"P"},{i:"16",x:0,y:11,w:3,h:3,content:"Q"},{i:"17",x:3,y:11,w:3,h:3,content:"R"},{i:"18",x:0,y:14,w:2,h:3,content:"S"},{i:"19",x:2,y:14,w:2,h:3,content:"T"},{i:"20",x:4,y:14,w:2,h:3,content:"U"},{i:"21",x:0,y:17,w:3,h:3,content:"V"},{i:"22",x:3,y:17,w:3,h:3,content:"W"},{i:"23",x:0,y:20,w:4,h:2,content:"X"},{i:"24",x:4,y:20,w:2,h:2,content:"Y"},{i:"25",x:0,y:22,w:2,h:2,content:"Z"},{i:"26",x:2,y:22,w:4,h:5,content:"AA"},{i:"27",x:0,y:24,w:2,h:3,content:"BB"},{i:"28",x:0,y:27,w:5,h:5,content:"CC"},{i:"29",x:5,y:27,w:1,h:10,content:"DD"},{i:"30",x:0,y:32,w:5,h:14,content:"EE"}],A=function(e){var t=e.isChecked,n=void 0!==t&&t,o=e.text,i=e.onChange,l=Object(c.useRef)(null),s=Object(c.useState)(0),u=Object(r.a)(s,2),d=u[0],m=u[1];return Object(c.useEffect)((function(){if(l.current)if(n)m(1);else{var e=l.current.getBoundingClientRect().width;m(e/2-1)}}),[n]),console.log("ischecked",n),a.a.createElement("div",{className:"toggle"},a.a.createElement("input",{type:"checkbox",defaultChecked:n,className:"checkbox"}),a.a.createElement("div",{ref:l,className:"labelContainer"},a.a.createElement("div",{className:"label",onClick:function(){console.log("checked onclick on toggle",n),i(!0)}},o.checked),a.a.createElement("div",{className:"label",onClick:function(){console.log("unchecked click in toggle",n),i(!1)}},o.unchecked)),a.a.createElement("div",{className:"slider",style:{left:d}}))},D=l.a.div.withConfig({displayName:"App__SourceDummyBlock",componentId:"vsen2t-0"})(["width:100px;height:100px;border:1px solid blue;display:grid;place-items:center;margin:0 20px;border-radius:10px;"]);u.a.setAppElement("#modal");var F={landscape:{1700:{margins:80}},portrait:{1300:{margins:80}}};function L(){var e=Object(c.useState)(1),t=Object(r.a)(e,2),n=t[0],o=t[1],i=Object(c.useState)(!1),l=Object(r.a)(i,2),s=l[0],d=l[1],m=Object(c.useState)(0),h=Object(r.a)(m,2),p=h[0],f=h[1],y=Object(c.useState)(window.innerWidth),g=Object(r.a)(y,2),b=g[0],w=g[1],v=Object(c.useState)("landscape"),E=Object(r.a)(v,2),x=E[0],j=E[1],k=Object(c.useState)(!0),C=Object(r.a)(k,2),N=C[0],L=C[1],B=Object(c.useState)(!1),M=Object(r.a)(B,2),I=M[0],z=M[1],Y=Object(c.useState)("click"),X=Object(r.a)(Y,2),H=X[0],W=X[1],J=Object(c.useReducer)(T,R),q=Object(r.a)(J,2),K=q[0],P=q[1],U=Object(c.useRef)(null),Z=Object(c.useMemo)((function(){return"landscape"===x?1620:1220}),[x]),_=function(e){e.ctrlKey&&(e.preventDefault(),L(!1),o((function(t){return Math.max(t-parseFloat((.01*e.deltaY).toFixed(2)),.25)})))};Object(c.useEffect)((function(){return window.addEventListener("wheel",_,{passive:!1}),function(){return window.removeEventListener("wheel",_,{passive:!1})}}),[]);document.onclick=function(e){U.current.contains(e.target)&&e.target.classList.contains("indicator")||z(!1)};var G=Object(c.useCallback)((function(e){var t;w(e);var n=F[x],c=Object.keys(n).find((function(t){return t>=e})),a=1;(null===(t=n[c])||void 0===t?void 0:t.margins)&&(a=(e-n[c].margins)/Z),o(a)}),[x,Z]),Q=Object(c.useCallback)((function(e){N&&G(e.target.innerWidth)}),[G,N]);Object(c.useEffect)((function(){return window.addEventListener("resize",Q),function(){return window.removeEventListener("resize",Q)}}),[Q]),Object(c.useEffect)((function(){U.current&&f(U.current.getBoundingClientRect().height)}),[]),Object(c.useEffect)((function(){G(window.innerWidth)}),[G]);return console.log("addwidgettype",H,"click"===H),a.a.createElement("div",{className:"App"},a.a.createElement("div",{className:"header",style:{width:n<1?b:b*n}},a.a.createElement("div",null,"Zoom"),a.a.createElement("div",{className:"btnContainer"},a.a.createElement("div",{className:"zoomToggle"},a.a.createElement("button",{onClick:function(){L(!1),o((function(e){return Math.max(parseFloat((e-.25).toFixed(2)),.25)}))}},"-"),a.a.createElement("input",{value:parseFloat((100*n).toFixed(2)),onChange:function(e){var t=e.target.value;t/=100,o(Math.max(parseFloat(t.toFixed(2)),0))}}),a.a.createElement("button",{onClick:function(){L(!1),o((function(e){return parseFloat((e+.25).toFixed(2))}))}},"+")),a.a.createElement("button",{className:"".concat(N?"btn active":"btn"),onClick:function(){L(!0),G(b)}},"Fit to window"),a.a.createElement("button",{className:"".concat("portrait"===x?"btn active":"btn"),onClick:function(){return j("portrait")}},"Set Portrait"),a.a.createElement("button",{className:"".concat("landscape"===x?"btn active":"btn"),onClick:function(){return j("landscape")}},"Set Landscape"),a.a.createElement(A,{text:{checked:"2-Click",unchecked:"DnD"},isChecked:"click"===H,onChange:function(){return W((function(e){return"dnd"===e?"click":"dnd"}))}}))),a.a.createElement("div",{style:{position:"relative",top:100,display:"flex",alignItems:"center",marginLeft:60}},"dnd"===H?a.a.createElement(a.a.Fragment,null,a.a.createElement(S,{targetRef:U,dispatch:P,key:"1"},a.a.createElement(D,null,"Drag to add widget")),a.a.createElement(S,{targetRef:U,dispatch:P,key:"2"},a.a.createElement(D,null,"Drag to add widget"))):a.a.createElement("button",{style:{width:200,height:60,border:"1px solid black",borderRadius:10,margin:"20px 0"},onClick:function(){return z(!0)}},"Click to add widget")),a.a.createElement("div",{className:"container",style:{margin:"100px auto 0",width:Z*n,height:p*n}},a.a.createElement("div",{ref:U,style:{transform:"scale(".concat(n,")"),transformOrigin:"0 0 0",width:Z,touchAction:"pan-x pan-y"}},a.a.createElement(O,{zoom:n,onClick:function(){return d(!0)},width:"landscape"===x?1620:1220,layout:K,dispatch:P,showAddCursor:I,setShowAddCursor:z})),a.a.createElement(u.a,{isOpen:s,onRequestClose:function(){return d(!1)},style:{content:{width:500,margin:"100px auto"}}},a.a.createElement("h1",null,"Best modal ever"),a.a.createElement("button",{style:{border:"1px solid blue",display:"block",cursor:"pointer"},onClick:function(){return d(!1)}},"Close me"))))}i.a.render(a.a.createElement(L,null),document.getElementById("root"))}},[[82,1,2]]]);
//# sourceMappingURL=main.97f7a3d1.chunk.js.map